---
date: "2019-08-05T14:07:44+02:00"
title: Template Walk-through
weight: 8
---


```{r setup, include=FALSE, results='hide', message=FALSE, warning=FALSE}
# hide all code chunks in the output, but show errors
knitr::opts_chunk$set(echo = FALSE,       # hide all code chunks in output
                      error = TRUE,       # show errors if they appear, but don't stop
                      fig.width = 6*1.25, # Figure width
                      fig.height = 6      # Figure height
                     )
# set default NA to - in output, define figure width/height
options(knitr.kable.NA = "-")

# Installing required packages for this template
required_packages <- c("knitr",       # create output docs
                       "dplyr",       # clean/shape data
                       "forcats",     # clean/shape data
                       "ggplot2",     # create plots and charts
                       "sitrep",      # MSF field epi functions
                       "linelist",    # Functions for cleaning/standardising data
                       "incidence",   # create epicurves
                       "aweek",       # define epi weeks
                       "epitools",    # 2x2 tables and other epi goodness
                       "sf",          # encode spatial vector data
                       "ggspatial")   # plot maps

for (pkg in required_packages) {
  # install packages if not already present
  if (!pkg %in% rownames(installed.packages())) {
    install.packages(pkg)
  }
  
  # load packages to this current session 
  library(pkg, character.only = TRUE)
}


# set default text size to 16 for plots
# give classic black/white axes for plots
ggplot2::theme_set(theme_classic(base_size = 18))

# Set the day that defines the beginning of your epiweek.
# you can start the week on any day of the week
# (the ISO standard is to start on Monday) 
aweek::set_week_start("Monday")
```

## Overview of this page
This page will demonstrate the steps to use the Acute Jaundice Syndrome (AJS) outbreak template, using data from an outbreak in Am Timan, Chad.

[Rmarkdown introduction](https://rmarkdown.rstudio.com/articles_intro.html)
[Rmarkdown authoring basics](https://rmarkdown.rstudio.com/authoring_basics.html)

## Header and introduction

![](/images/AJS_Intro.png)

The very top of the template consists of a header surrounded by `---`. Here you may want to edit the title of your document. The other settings in the header define the default document type produced (Microsoft Word) when the RMarkdown is "knit".

The Introduction section is for your information and may be deleted before knitting the document.

## Package installation
This section begins with text (with white background) which explains the purpose of the following code chunk. **For your final report you may delete the text, but you must keep the code chunk!** The code will run without producing any output in your report, but is required to load packages necessary to produce the report.

In the code chunk the commands do the following:
1) Sets default settings for the RMarkdown such as figure size, and handling of errors  

2) Sets the default way of displaying missing values in tables as "-"  

3) Creates a vector of names of packages required for the template to run. Then each package is installed if it is not already installed, and each package is loaded for use in the current R session.

4) Default plot theme text size and epidemiological weeks are set to begin on Mondays.  



## Reading in your data

**In this template section you choose the appropriate code chunk to importing your dataset.** 

![Data Import](/images/Data_Import.png)

For this exercise we are using a dataset from MSF's response an outbreak of suspected hepatitis E in Am Timan, Chad. We suspect that this dataset is not standardized to the MSF Data Dictionary for AJS.  

We can view the data dictionary for AJS using this command (which is also found in your template)

**[FIX to be scrolling version of the dataset]**

```{r}
# creates object linelist_dict using the msf_dict function from the sitrep package
# View the data dictionary by using the View() command as below, or by clicking it in your Environment (upper-right RStudio pane)
linelist_dict <- msf_dict("AJS", compact = FALSE) %>%
  select(option_code, option_name, everything())

head(linelist_dict)
```

Compare that to a snapshot of our dataset:

```{r include=FALSE, results='hide', message=FALSE, warning=FALSE}
## Read data ------------------------------------
# Excel file
# to read in a specific sheet use "which"
linelist_raw <- rio::import("AJS_AmTiman.xlsx")
```

```{r}
head(linelist_raw)
```
We can see that 
