---
date: "2019-08-22T15:33:00+02:00"
title: Advanced Functions
weight: 11
---



```{r include=FALSE, results='hide', message=FALSE, warning=FALSE}
# Silently read AJS example dataset

library(sitrep)
library(here)
library(dplyr)

linelist_raw <- gen_data("AJS")
linelist_cleaned <- linelist_raw

#Clean sex for age pyramid graphic
linelist_cleaned$sex[linelist_cleaned$sex == "U"] <- NA
linelist_cleaned$sex <- factor(linelist_cleaned$sex)

#Create age groups for pyramid graphic
linelist_cleaned$age_group <- age_categories(linelist_cleaned$age_years, 
                                             breakers = c(0, 3, 15, 30, 45))
```


## The Here functions  

The templates use the **Here package to assist with locating local files**. The Here package and its function here() work well with R projects. It automatically considers the top-level folder of your R project as "here". Then, in your script, if you want to import or reference a file saved in your R project's folders, you can use here() to tell R where it is.  


Below is an example of importing the file "linelist.xlsx". The import() function from the rio package does the importing, but it needs to be told where to look on your computer to find the file. Normally, it accepts a filepath in quotes, but it is easy to make mistakes.  

Instead, import() is wrapped around here(). The here() function knows where "here" is (the top folder of the R project). If you are unsure where "here" is set to, run this command:


```{r eval=FALSE}
# This command tells you the folder path that "here" is set to 
here()
```

If the file you want is in the folder designated as "here", all you have to do is provide the name of the file in quotes (with the appropriate ending). 

```{r eval=FALSE}
linelist_raw <- rio::import(here("linelist.xlsx"), which = "Sheet1")
```

*Note: After the closing parenthes of here() the import() function continues. There is a comma and the optional argument `which = `, that specifies which sheet of the Excel file to import.*  

**If however, your file is within subfolders of the folder designated as "here"** - let's say it is in the subfolder "data" and then the sub-subfolder "linelists" - **you write these folder names before the file name, in quotes, and separated by commas**, as below:  

```{r eval=FALSE}
linelist_raw <- rio::import(here("data", "linelists", "linelist.xlsx"), which = "Sheet1")
```

You can read more about Here and here() at [this site](https://github.com/jennybc/here_here) and [this one](https://here.r-lib.org/)  



## Joins  

The animations below can be acccessed [here](https://github.com/gadenbuie/tidyexplain).

### Left join  

An example of a left join from the AJS outbreak template occurs in the TODO

![](/images/left-join.gif)

![](/images/right-join.gif)

![](/images/full-join.gif)

![](/images/inner-join.gif)

